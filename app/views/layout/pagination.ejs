<% 
  var firstPage = 1;
  if (viewPage > maxPage) {
    viewPage = maxPage;
    offset = 0;
  }
%>

<% if (totalItems > 0) {%>

	<ul class="pagination">
    <!-- Botón para navegar a la primera página -->
    <% if (currentPage === firstPage) { %>
      <li class="disabled"><span>&laquo;&laquo;</span></li>
    <% } else { %>
      <li><a href="<%= url + ?page=firstPage %>">&laquo;&laquo;</a></li>
    <% } %>

    <!-- Botón para navegar a la página anterior -->
    <% if (currentPage === firstPage) {%>
      <li class="disabled"><span>&laquo;</span></li>
    <% } else { %>
      <li><a href="<%= url + ?page=currentPage-1 %>">&laquo;</a></li>
    <% } %>

    <!-- Mostrar la numeración de las páginas, partiendo de la página actual hasta el maximo definido en $maxPages -->
    <% if (currentPage <= viewPage - offset) { %>
      <% for() { %>
      @for($i = $firstPage; $i<=$maxPages; $i++)
        @if($i == $paginator->currentPage())
          <li class="active"><span>{{ $i }}</span></li>
        @else
          <li><a href="{{ $paginator->url($i) }}">{{ $i }}</a></li>
        @endif
      @endfor
      <% } %>
    <% } %>

    @if(($paginator->currentPage() > $maxPages - $offset) && ($paginator->currentPage() <= $paginator->lastPage() - $offset))
        @php
            if ($maxPages == $paginator->lastPage()) 
                $offset = $paginator->lastPage()-1;
        @endphp

      @for($i = $paginator->currentPage()-$offset; $i<=$paginator->currentPage(); $i++)
        @if($i == $paginator->currentPage())
          <li class="active"><span>{{ $i }}</span></li>
        @else
          <li><a href="{{ $paginator->url($i) }}">{{ $i }}</a></li>
        @endif
      @endfor

        @if($maxPages != $paginator->lastPage())
            @for($i = $paginator->currentPage()+1; $i<=$paginator->currentPage()+$offset; $i++)
                <li><a href="{{ $paginator->url($i) }}">{{ $i }}</a></li>
            @endfor
        @endif

        @php
            if ($maxPages == $paginator->lastPage()) 
                $offset = 0;
        @endphp
    @endif

    @if($paginator->currentPage() > $paginator->lastPage() - $offset)
      @for($i = $paginator->lastPage()-$maxPages+1; $i<=$paginator->lastPage(); $i++)
        @if($i == $paginator->currentPage())
          <li class="active"><span>{{ $i }}</span></li>
        @else
          <li><a href="{{ $paginator->url($i) }}">{{ $i }}</a></li>
        @endif
      @endfor
    @endif

    <!-- Botón para navegar a la página siguinete -->
    @if ($paginator->hasMorePages())
        <li><a href="{{ $paginator->nextPageUrl() }}" rel="next">&raquo;</a></li>
    @else
        <li class="disabled"><span>&raquo;</span></li>
    @endif

    <!-- Botón para navegar a la última página -->
      @if ($paginator->hasMorePages())
        <li><a href="{{ $paginator->url($paginator->lastPage()) }}" rel="next">&raquo;&raquo;</a></li>
    @else
        <li class="disabled"><span>&raquo;&raquo;</span></li>
    @endif
        
  </ul>
  
<% } %>
